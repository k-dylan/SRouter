!function(t){"use strict";t.SRouter={routers:[],config:function(t){return this.mode=t&&"history"==t.mode&&history.pushState?"history":"hash",this},add:function(t,e,a){"function"==typeof e&&(a=e,e=t);var n=this._compile(t);return this.routers.push({reg:n.reg,paramsName:n.paramsName,name:e,hander:a}),this},remove:function(t){for(var e=this.routers,a=0,n=e.length;n>a;a++)if(e[a].name===t){e.splice(a,1);break}return this},listen:function(){var e=this;return"history"===this.mode?this._addEvent(t,"popstate",function(){var t=location.path;e._check(t)}):this._addEvent(t,"hashchange",function(){var t=location.hash.replace(/^#/,"");e._check(t)}),this},_check:function(t){for(var e=this.routers,a=0,n=e.length;n>a;a++){var r=t.match(e[a].reg);if(r){var i={};return e[a].paramsName&&e[a].paramsName.forEach(function(t,e){i[t]=r[e+1]}),e[a].hander.call({},{params:i}),!0}}this.defaultHander&&this.defaultHander.call({})},go:function(e){"history"===this.mode?(t.history.pushState({path:e},"",e),this._check(e)):t.location.hash=e},"default":function(t){return this.defaultHander=t,this},_compile:function(t){var e={},a=/:(\w+)/g,n=t.match(a);return n&&(e.paramsName=n.map(function(t){return t.replace(":","")}),t=t.replace(/:(\w+)/g,"(\\w+)")),e.reg=new RegExp("^"+t+"$"),e},_addEvent:function(t,e,a){t.addEventListener?t.addEventListener(e,a,!1):t.attachEvent?t.attachEvent("on"+e,a):t["on"+e]=a}}}(window);